# 小红书爬虫返回字段说明

## 搜索接口返回的字段（XHSNote）

```typescript
{
  id: string;              // 笔记ID
  xsec_token: string;      // 安全令牌
  title: string;           // 笔记标题
  desc: string;            // 笔记描述
  type: string;            // 笔记类型
  user: {                  // 用户信息
    user_id: string;       // 用户ID
    nickname: string;      // 昵称
    avatar: string;        // 头像URL
  };
  cover: string;           // 封面图URL
  liked_count: string;     // 点赞数（字符串格式，可能包含"w"单位）
}
```

## 笔记详情接口返回的字段（XHSNoteDetail）

```typescript
{
  id: string;              // 笔记ID
  title: string;           // 笔记标题
  desc: string;            // 笔记描述
  type: string;            // 笔记类型
  user: {                  // 用户信息
    user_id: string;       // 用户ID
    nickname: string;      // 昵称
    avatar: string;        // 头像URL
  };
  images: string[];        // 图片URL列表
  video_url: string;       // 视频URL（如果有）
  liked_count: string;     // 点赞数
  collected_count: string; // 收藏数
  comment_count: string;   // 评论数
  share_count: string;     // 分享数
  time: number;            // 发布时间（时间戳）
  tag_list: string[];      // 标签列表
}
```

## 保存到数据库时的字段映射

### Article 对象字段：
- `id`: 笔记ID（添加前缀 `xhs-`）
- `source`: 'xhs'
- `source_item_id`: 笔记ID
- `original_url`: 小红书链接
- `title`: 笔记标题
- `summary`: 描述前200字符
- `content`: 描述 + 图片Markdown
- `content_plain`: 纯文本描述
- `author`: JSON格式，包含 { id, name, avatar }
- `media`: JSON数组，图片列表
- `imageUrl`: 封面图
- `category`: 第一个标签或'小红书'
- `tags`: 标签数组
- `topics`: undefined
- `tone`: 'Casual'
- `estimatedReadTime`: 估算阅读时间
- `language`: 'zh'
- `metrics`: { likes, favorites, comments, shares }
- `created_at`: 当前时间戳
- `publish_time`: 发布时间（秒转毫秒）
- `crawl_context`: { keyword, crawled_at }
- `status`: 'active'
- `isPublic`: true
- `ownerId`: 用户ID
- `deletedAt`: undefined

## 数据库表字段

articles 表应包含以下字段：
- id, source, source_item_id, original_url
- title, summary, content, content_plain
- author (TEXT, JSON格式)
- media (TEXT, JSON格式)
- imageUrl
- category, tags (TEXT, JSON格式), topics (TEXT, JSON格式)
- tone, estimatedReadTime, language
- metrics (TEXT, JSON格式)
- created_at, publish_time
- crawl_context (TEXT, JSON格式)
- status, isPublic, ownerId, deletedAt

