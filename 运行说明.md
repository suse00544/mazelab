# Maze Lab 运行说明

## 项目概述
Maze Lab 是一个 AI 推荐策略验证实验平台，使用 Gemini AI 进行内容推荐。

## 技术栈
- **前端**: React + Vite + TypeScript (端口 5173)
- **后端**: Express.js + SQLite (端口 3001)
- **AI**: Google Gemini API
- **爬虫**: Python FastAPI + Playwright (端口 8000)

## 环境要求
- Node.js (已安装 ✅)
- Python 3.9+ (已安装 ✅)
- Playwright 浏览器 (需要安装)

## 已完成的安装步骤
✅ 前端依赖已安装
✅ 后端依赖已安装
✅ Python 爬虫依赖已安装
⚠️  Playwright 浏览器安装超时（可稍后手动安装）

## 环境变量配置

### 必需的环境变量
1. **GEMINI_API_KEY**: Google Gemini API 密钥
   - 获取地址: https://makersuite.google.com/app/apikey
   - 用于 AI 推荐功能

### 可选的环境变量
2. **JINA_API_KEY**: Jina Reader API 密钥
   - 获取地址: https://jina.ai/?sui=apikey
   - 用于从 URL 导入文章

### 配置方式
方式1: 创建 `.env.local` 文件（推荐）
```bash
GEMINI_API_KEY=your_gemini_api_key_here
JINA_API_KEY=your_jina_api_key_here
```

方式2: 导出环境变量
```bash
export GEMINI_API_KEY=your_gemini_api_key_here
export JINA_API_KEY=your_jina_api_key_here
```

## 启动服务

### 方式1: 使用启动脚本（推荐）
```bash
./start-dev.sh
```

### 方式2: 手动启动（三个终端窗口）

**终端1 - 启动爬虫服务:**
```bash
cd crawler
python3 main.py
```

**终端2 - 启动后端服务:**
```bash
cd server
node index.js
```

**终端3 - 启动前端服务:**
```bash
npm run dev
```

## 访问地址
- 前端: http://localhost:5173
- 后端 API: http://localhost:3001
- 爬虫 API: http://localhost:8000

## 完成 Playwright 浏览器安装

如果爬虫服务无法启动，需要安装 Playwright 浏览器：

```bash
cd crawler
python3 -m playwright install chromium
```

如果下载超时，可以：
1. 检查网络连接
2. 使用代理
3. 稍后重试

## 常见问题

### 1. 端口被占用
如果端口被占用，可以：
- 修改 `vite.config.ts` 中的前端端口
- 修改 `server/index.js` 中的后端端口
- 修改 `crawler/main.py` 中的爬虫端口

### 2. 数据库初始化
数据库会在首次运行时自动创建在 `server/data/maze_lab.sqlite`

### 3. 爬虫服务需要 Cookie
小红书爬虫功能需要用户提供 Cookie，详见项目 README。

## 下一步
1. 设置 GEMINI_API_KEY 环境变量
2. 完成 Playwright 浏览器安装（如果需要使用爬虫功能）
3. 启动所有服务
4. 访问 http://localhost:5173 开始使用

