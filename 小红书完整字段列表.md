# 小红书内容完整字段列表

## 1. 搜索接口返回的字段（XHSNote）

搜索接口 `/api/xhs/search` 返回的数据结构：

```typescript
interface XHSNote {
  id: string;              // 笔记ID
  xsec_token: string;      // 安全令牌（用于后续请求）
  title: string;           // 笔记标题
  desc: string;            // 笔记描述/正文
  type: string;            // 笔记类型（'normal'/'video'）
  user: {                  // 用户信息对象
    user_id: string;       // 用户ID
    nickname: string;      // 用户昵称
    avatar: string;        // 用户头像URL
  };
  cover: string;           // 封面图URL
  liked_count: string;     // 点赞数（字符串格式，可能包含"w"单位，如"1.2w"）
}
```

### 字段说明

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `id` | string | 笔记唯一标识ID | "6938e739000000001e021b21" |
| `xsec_token` | string | 小红书安全令牌，用于获取详情和评论 | "xxx..." |
| `title` | string | 笔记标题 | "今天吃什么" |
| `desc` | string | 笔记描述/正文内容 | "今天做了...\n#美食 #日常" |
| `type` | string | 笔记类型 | "normal" 或 "video" |
| `user.user_id` | string | 用户ID | "5f3a1b2c3d4e5f6a7b8c9d0e" |
| `user.nickname` | string | 用户昵称 | "小红薯" |
| `user.avatar` | string | 用户头像URL | "https://..." |
| `cover` | string | 封面图URL | "https://..." |
| `liked_count` | string | 点赞数（字符串） | "1234" 或 "1.2w" |

---

## 2. 笔记详情接口返回的字段（XHSNoteDetail）

详情接口 `/api/xhs/note/detail` 返回的数据结构：

```typescript
interface XHSNoteDetail {
  id: string;              // 笔记ID
  title: string;           // 笔记标题
  desc: string;            // 笔记描述/正文
  type: string;            // 笔记类型（'normal'/'video'）
  user: {                  // 用户信息对象
    user_id: string;       // 用户ID
    nickname: string;      // 用户昵称
    avatar: string;        // 用户头像URL
  };
  images: string[];         // 图片URL数组
  video_url: string;       // 视频URL（如果有视频）
  liked_count: string;     // 点赞数（字符串）
  collected_count: string; // 收藏数（字符串）
  comment_count: string;   // 评论数（字符串）
  share_count: string;     // 分享数（字符串）
  time: number;            // 发布时间（Unix时间戳，秒）
  tag_list: string[];      // 标签列表
}
```

### 字段说明

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `id` | string | 笔记唯一标识ID | "6938e739000000001e021b21" |
| `title` | string | 笔记标题 | "今天吃什么" |
| `desc` | string | 笔记描述/正文内容 | "今天做了...\n#美食 #日常" |
| `type` | string | 笔记类型 | "normal" 或 "video" |
| `user.user_id` | string | 用户ID | "5f3a1b2c3d4e5f6a7b8c9d0e" |
| `user.nickname` | string | 用户昵称 | "小红薯" |
| `user.avatar` | string | 用户头像URL | "https://..." |
| `images` | string[] | 图片URL数组 | ["https://...", "https://..."] |
| `video_url` | string | 视频URL（视频笔记才有） | "https://..." 或 "" |
| `liked_count` | string | 点赞数 | "1234" 或 "1.2w" |
| `collected_count` | string | 收藏数 | "567" 或 "0.5w" |
| `comment_count` | string | 评论数 | "89" |
| `share_count` | string | 分享数 | "12" |
| `time` | number | 发布时间（Unix时间戳，秒） | 1704067200 |
| `tag_list` | string[] | 标签列表 | ["美食", "日常", "生活"] |

---

## 3. 评论接口返回的字段（XHSComment）

评论接口 `/api/xhs/comments` 返回的数据结构：

```typescript
interface XHSComment {
  id: string;              // 评论ID
  content: string;         // 评论内容
  user: {                  // 用户信息
    user_id: string;
    nickname: string;
    avatar: string;
  };
  like_count: number;      // 点赞数（数字）
  create_time: number;     // 创建时间（Unix时间戳，秒）
  sub_comment_count: number; // 二级评论数量
  sub_comments?: XHSSubComment[]; // 二级评论列表（可选）
}

interface XHSSubComment {
  id: string;              // 二级评论ID
  content: string;         // 评论内容
  user: {                  // 用户信息
    user_id: string;
    nickname: string;
    avatar: string;
  };
  like_count: number;      // 点赞数
  create_time: number;     // 创建时间
  reply_to_user?: string;  // 回复的用户名（可选）
}
```

---

## 4. 用户信息接口返回的字段（XHSUser）

用户信息接口 `/api/xhs/user/info` 返回的数据结构：

```typescript
interface XHSUser {
  user_id: string;         // 用户ID
  nickname: string;        // 用户昵称
  desc: string;           // 用户简介
  avatar: string;         // 用户头像URL
  followers: number;      // 粉丝数
  followed: number;       // 关注数
  notes_count: number;    // 笔记数量
  liked_count: number;    // 获赞总数
}
```

---

## 5. 字段汇总表

### 搜索接口字段（9个）
1. `id` - 笔记ID
2. `xsec_token` - 安全令牌
3. `title` - 标题
4. `desc` - 描述
5. `type` - 类型
6. `user` - 用户对象（包含 user_id, nickname, avatar）
7. `cover` - 封面图
8. `liked_count` - 点赞数

### 详情接口字段（13个）
1. `id` - 笔记ID
2. `title` - 标题
3. `desc` - 描述
4. `type` - 类型
5. `user` - 用户对象（包含 user_id, nickname, avatar）
6. `images` - 图片数组
7. `video_url` - 视频URL
8. `liked_count` - 点赞数
9. `collected_count` - 收藏数
10. `comment_count` - 评论数
11. `share_count` - 分享数
12. `time` - 发布时间
13. `tag_list` - 标签列表

### 完整字段列表（合并搜索和详情）

| 字段名 | 来源 | 类型 | 说明 |
|--------|------|------|------|
| `id` | 搜索/详情 | string | 笔记ID |
| `xsec_token` | 搜索 | string | 安全令牌 |
| `title` | 搜索/详情 | string | 标题 |
| `desc` | 搜索/详情 | string | 描述 |
| `type` | 搜索/详情 | string | 笔记类型 |
| `user.user_id` | 搜索/详情 | string | 用户ID |
| `user.nickname` | 搜索/详情 | string | 用户昵称 |
| `user.avatar` | 搜索/详情 | string | 用户头像 |
| `cover` | 搜索 | string | 封面图URL |
| `images` | 详情 | string[] | 图片URL数组 |
| `video_url` | 详情 | string | 视频URL |
| `liked_count` | 搜索/详情 | string | 点赞数 |
| `collected_count` | 详情 | string | 收藏数 |
| `comment_count` | 详情 | string | 评论数 |
| `share_count` | 详情 | string | 分享数 |
| `time` | 详情 | number | 发布时间（秒） |
| `tag_list` | 详情 | string[] | 标签列表 |

---

## 6. 字段映射到数据库表

小红书字段 → Article 表字段的映射关系：

| 小红书字段 | Article字段 | 转换说明 |
|-----------|------------|---------|
| `id` | `source_item_id` | 直接映射 |
| `xsec_token` | `xsec_token` | 直接映射 |
| `title` | `title` | 直接映射 |
| `desc` | `content_plain`, `summary` | desc → content_plain, desc前200字符 → summary |
| `type` | `note_type` | 直接映射 |
| `user` | `author` | {user_id, nickname, avatar} → {id, name, avatar} |
| `cover` | `cover_url` | 直接映射 |
| `images[]` | `media[]` | 转换为 [{type: 'image', url_local, url_source, order}] |
| `video_url` | `video_url` | 直接映射 |
| `liked_count` | `metrics.likes` | 字符串转数字（处理"w"单位） |
| `collected_count` | `metrics.favorites` | 字符串转数字 |
| `comment_count` | `metrics.comments` | 字符串转数字 |
| `share_count` | `metrics.shares` | 字符串转数字 |
| `time` | `publish_time` | 秒转毫秒（time * 1000） |
| `tag_list[]` | `tags[]` | 直接映射 |

---

## 7. 数据示例

### 搜索返回示例
```json
{
  "id": "6938e739000000001e021b21",
  "xsec_token": "xxx...",
  "title": "今天吃什么",
  "desc": "今天做了好吃的\n#美食 #日常",
  "type": "normal",
  "user": {
    "user_id": "5f3a1b2c3d4e5f6a7b8c9d0e",
    "nickname": "小红薯",
    "avatar": "https://sns-avatar-qc.xhscdn.com/..."
  },
  "cover": "https://sns-webpic-qc.xhscdn.com/...",
  "liked_count": "1.2w"
}
```

### 详情返回示例
```json
{
  "id": "6938e739000000001e021b21",
  "title": "今天吃什么",
  "desc": "今天做了好吃的\n#美食 #日常",
  "type": "normal",
  "user": {
    "user_id": "5f3a1b2c3d4e5f6a7b8c9d0e",
    "nickname": "小红薯",
    "avatar": "https://sns-avatar-qc.xhscdn.com/..."
  },
  "images": [
    "https://sns-webpic-qc.xhscdn.com/...",
    "https://sns-webpic-qc.xhscdn.com/..."
  ],
  "video_url": "",
  "liked_count": "12345",
  "collected_count": "567",
  "comment_count": "89",
  "share_count": "12",
  "time": 1704067200,
  "tag_list": ["美食", "日常", "生活"]
}
```

